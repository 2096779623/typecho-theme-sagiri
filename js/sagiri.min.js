(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Sagiri = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = liveTime;

function liveTime(time) {
  if (!time) {
    throw Error('未指定日期！');
  }

  var time = new Date(time);
  var live = Math.floor(new Date().getTime() - time.getTime()),
      m = 24 * 60 * 60 * 1000;
  var liveDay = live / m,
      mliveDay = Math.floor(liveDay),
      liveHour = (liveDay - mliveDay) * 24,
      mliveHour = Math.floor(liveHour),
      liveMin = (liveHour - mliveHour) * 60,
      mliveMin = Math.floor((liveHour - mliveHour) * 60),
      liveSec = Math.floor((liveMin - mliveMin) * 60); // prettier-ignore

  document.querySelector('#live-time').innerText = "( •̀ ω •́ ) 被续 " + mliveDay + ' 天 ' + mliveHour + ' 小时 ' + mliveMin + ' 分 ' + liveSec + ' 秒';
}

},{}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = postScroll;

function postScroll() {
  // ie11 fail ?????????
  // if (document.body.scrollIntoView) {
  //   setTimeout(function() {
  //     document.querySelector('.content-wrap').scrollIntoView({
  //       behavior: 'smooth',
  //       block: 'start',
  //       inline: 'nearest'
  //     })
  //   }, 500)
  //   return void 0
  // }
  var timer = null,
      speed = 10,
      needScroll = Sagiri.util.isMobile ? 180 : 500;

  function scroll() {
    /* prettier-ignore */
    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
    var clientHeight = document.body.clientHeight || document.documentElement.clientHeight;
    var scrollHeight = document.body.scrollHeight || document.documentElement.scrollHeight;

    if (document.body.scrollTop < 500) {
      document.body.scrollTop += speed;
    }

    if (document.documentElement.scrollTop < 500) {
      document.documentElement.scrollTop += speed;
    }

    if (scrollTop >= needScroll || scrollTop + clientHeight >= scrollHeight) {
      clearInterval(timer);
    }
  }

  timer = setInterval(scroll, 10);
}

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var __ribbonsrc__ = {
  z: -1,
  alpha: 0.9,
  size: 120
};
var c = document.createElement('canvas'),
    c2d = c.getContext('2d'),
    pr = window.devicePixelRatio || 1,
    width = window.innerWidth,
    height = window.innerHeight,
    s = __ribbonsrc__.size,
    q,
    m = Math,
    r = 0,
    pi = m.PI * 2,
    cos = m.cos,
    randoMath = m.random;
c.width = width * pr;
c.height = height * pr;
c.style.cssText = 'opacity: ' + __ribbonsrc__.alpha + ';position:fixed;top:0;left:0;z-index: ' + __ribbonsrc__.z + ';width:100%;height:100%;pointer-events:none;';
c2d.scale(pr, pr);
c2d.globalAlpha = __ribbonsrc__.alpha;
document.getElementsByTagName('body')[0].appendChild(c);

function redraw() {
  c2d.clearRect(0, 0, width, height);
  q = [{
    x: 0,
    y: height * 0.7 + s
  }, {
    x: 0,
    y: height * 0.7 - s
  }];

  while (q[1].x < width + s) {
    draw(q[0], q[1]);
  }
}

function draw(i, j) {
  c2d.beginPath();
  c2d.moveTo(i.x, i.y);
  c2d.lineTo(j.x, j.y);
  var k = j.x + (randoMath() * 2 - 0.25) * s,
      n = line(j.y);
  c2d.lineTo(k, n);
  c2d.closePath();
  r -= pi / -50;
  c2d.fillStyle = '#' + (cos(r) * 127 + 128 << 16 | cos(r + pi / 3) * 127 + 128 << 8 | cos(r + pi / 3 * 2) * 127 + 128).toString(16);
  c2d.fill();
  q[0] = q[1];
  q[1] = {
    x: k,
    y: n
  };
}

function line(p) {
  var t = p + (randoMath() * 2 - 1.1) * s;
  return t > height || t < 0 ? line(p) : t;
}

function ribbons() {
  document.onclick = redraw;
  document.ontouchstart = redraw;
  redraw();
}

var _default = ribbons;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

var _utils = _interopRequireDefault(require("./utils"));

var _package = _interopRequireDefault(require("../../package.json"));

var _ribbons = _interopRequireDefault(require("./ribbons"));

var _livetime = _interopRequireDefault(require("./livetime"));

var _postscroll = _interopRequireDefault(require("./postscroll"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var F = {
  ribbons: _ribbons.default,
  liveTime: _livetime.default,
  postScroll: _postscroll.default
};

var Sagiri = function Sagiri() {
  _classCallCheck(this, Sagiri);

  this.util = _utils.default;
  this.version = _package.default.version;
  this.hasBanner = !!document.querySelector('.site-config');
  this.F = F; // theme Feature GLOBAL F
  // copy-right
  //DO NOT DELETE !

  console.info(" %c Sagiri ".concat(this.version, " %c https://github.com/shiyiya/typecho-theme-sagiri "), 'background: #ed143d7d; padding:5px 0;', 'background: #40b3ec;padding:5px 5px 5px 0;');
};

module.exports = new Sagiri();

},{"../../package.json":6,"./livetime":1,"./postscroll":2,"./ribbons":3,"./utils":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var isMobile = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g.test(window.navigator.userAgent) && window.screen.width < 767;

function easeInOutQuad(t, b, c, d) {
  if ((t /= d / 2) < 1) return c / 2 * t * t + b;
  return -c / 2 * (--t * (t - 2) - 1) + b;
}

function request(method, url, param, callback) {
  var xhr = new XMLHttpRequest();

  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
      if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
        callback(xhr.responseText);
      } else {
        callback(xhr.responseText);
      }
    }
  };

  if (method.toLocaleUpperCase === 'POST') {
    if (param && Object.keys(param).length > 0) {
      var temp = '';

      for (var key in param) {
        temp += '&' + key + '=' + param[key];
      }

      param = '?' + temp.slice(1);
    }

    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  }

  xhr.open(method, url, true);
  xhr.send(param);
}

var _default = {
  isMobile: isMobile,
  easeInOutQuad: easeInOutQuad,
  request: request
};
exports.default = _default;

},{}],6:[function(require,module,exports){
module.exports={
  "name": "typecho-theme-sagiri",
  "version": "1.1.0",
  "description": "Lovely theme for Typecho.",
  "main": "index.js",
  "directories": {
    "lib": "lib"
  },
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "gulp start",
    "build": "gulp build",
    "u": "mkdir .\\temp\\js && mkdir .\\temp\\css && copy .\\*.php .\\temp && copy .\\js\\*.min.js .\\temp\\js && copy .\\css\\*.min.css .\\temp\\css && mkdir .\\temp\\doc  && copy .\\doc\\* .\\temp\\doc\\  && mkdir .\\temp\\img && copy .\\img\\* .\\temp\\img\\  && mkdir .\\temp\\font && copy .\\font\\* .\\temp\\font\\  && mkdir .\\temp\\lib && copy .\\lib\\**\\* .\\temp\\lib\\**\\*  && mkdir .\\temp\\util copy .\\util\\* .\\temp\\util\\ "
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/shiyiya/typecho-theme-sagiri.git"
  },
  "keywords": [
    "typecho-theme"
  ],
  "author": "shiyiya",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/shiyiya/typecho-theme-sagiri/issues"
  },
  "homepage": "https://github.com/shiyiya/typecho-theme-sagiri#readme",
  "browserslist": {
    "production": [
      "last 3 version",
      "ie 10"
    ]
  },
  "devDependencies": {
    "@babel/core": "^7.6.4",
    "@babel/preset-env": "^7.6.3",
    "babelify": "^10.0.0",
    "browserify": "^16.5.0",
    "gsap": "^2.1.3",
    "gulp": "^4.0.0",
    "gulp-autoprefixer": "^6.0.0",
    "gulp-babel": "^8.0.0-beta.2",
    "gulp-clean-css": "^3.10.0",
    "gulp-rename": "^1.4.0",
    "gulp-uglify": "^3.0.1",
    "vinyl-buffer": "^1.0.1",
    "vinyl-source-stream": "^2.0.0"
  },
  "dependencies": {
    "core-js": "^3.1.4"
  }
}

},{}]},{},[4])(4)
});
